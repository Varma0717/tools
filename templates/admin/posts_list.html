{% extends 'base.html' %}

{% block title %}
  Manage Posts - Admin Panel
{% endblock %}

{% block content %}
  <div class="min-h-screen bg-gray-50 py-8">
    <div class="max-w-7xl mx-auto px-6">
      <div class="bg-white rounded-2xl shadow-lg p-8">
        <div class="flex items-center justify-between mb-8">
          <div class="flex items-center space-x-4">
            <img src="/static/favicon.png" alt="Super SEO Toolkit Logo" class="w-12 h-12 rounded-xl" />
            <h1 class="text-3xl font-bold text-gray-900"><i data-lucide="file-text"></i> Manage Posts</h1>
          </div>
          <a href="{{ url_for('admin.posts_create') }}" class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-semibold transition-colors flex items-center space-x-2">
            <i data-lucide="plus-circle"></i>
            <span>Create New Post</span>
          </a>
        </div>

        <div class="overflow-x-auto">
          <table class="w-full">
            <thead>
              <tr class="border-b border-gray-200">
                <th class="text-left py-4 px-6 font-semibold text-gray-900">Title</th>
                <th class="text-left py-4 px-6 font-semibold text-gray-900">Slug</th>
                <th class="text-left py-4 px-6 font-semibold text-gray-900">Author</th>
                <th class="text-left py-4 px-6 font-semibold text-gray-900">Created At</th>
                <th class="text-left py-4 px-6 font-semibold text-gray-900">Actions</th>
              </tr>
            </thead>
            <tbody>
              {% for post in posts %}
                <tr class="border-b border-gray-100 hover:bg-gray-50">
                  <td class="py-4 px-6">{{ post.title }}</td>
                  <td class="py-4 px-6">{{ post.slug }}</td>
                  <td class="py-4 px-6">{{ post.author or 'â€”' }}</td>
                  <td class="py-4 px-6">{{ post.created_at.strftime('%Y-%m-%d') }}</td>
                  <td class="py-4 px-6">
                    <div class="flex items-center space-x-4">
                      <a href="{{ url_for('admin.posts_edit', post_id=post.id) }}" class="text-blue-500 hover:text-blue-700 transition-colors flex items-center space-x-1">
                        <i data-lucide="edit-2"></i>
                        <span>Edit</span>
                      </a>
                      <form action="{{ url_for('admin.posts_delete', post_id=post.id) }}" method="POST" onsubmit="return confirm('Are you sure?');" class="inline">
                        <input type="hidden" name="csrf_token" value="{{ csrf_token }}" />
                        <button type="submit" class="text-red-500 hover:text-red-700 transition-colors flex items-center space-x-1">
                          <i data-lucide="trash-2"></i>
                          <span>Delete</span>
                        </button>
                      </form>
                    </div>
                  </td>
                </tr>
              {% else %}
                <tr>
                  <td colspan="5" class="py-8 px-6 text-center text-gray-500">No posts found.</td>
                </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
{% endblock %}
