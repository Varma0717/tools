{% extends 'base.html' %}

{% block title %}My Account - Manage Profile & Settings | Super SEO Toolkit{% endblock %}

{% block meta_description %}Manage your Super SEO Toolkit account, update profile settings, view subscription status, and configure your SEO tools dashboard.{% endblock %}

{% block content %}
<div class="min-h-screen bg-gray-50">
    <!-- Account Header -->
    <section class="bg-gradient-to-r from-blue-600 to-purple-600 text-white py-12">
        <div class="max-w-7xl mx-auto px-6">
            <div class="flex items-center justify-between">
                <div class="flex items-center">
                    <div class="w-20 h-20 bg-white/20 backdrop-blur-sm rounded-full flex items-center justify-center mr-6">
                        <svg class="w-10 h-10 text-white" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z" clip-rule="evenodd"/>
                        </svg>
                    </div>
                    <div>
                        <h1 class="text-3xl md:text-4xl font-bold mb-2">My Account</h1>
                        <p class="text-blue-100 text-lg">
                            Welcome back, {{ current_user.username if current_user and current_user.is_authenticated else 'Guest' }}!
                        </p>
                        <div class="flex items-center mt-2">
                            {% if current_user and current_user.is_authenticated %}
                                {% if current_user.is_pro_user() %}
                                    <span class="bg-yellow-500 text-yellow-900 px-3 py-1 rounded-full text-sm font-medium mr-3">
                                        ⭐ Pro Member
                                    </span>
                                {% else %}
                                    <span class="bg-white/20 text-white px-3 py-1 rounded-full text-sm font-medium mr-3">
                                        Free Plan
                                    </span>
                                {% endif %}
                            {% endif %}
                            <span class="text-blue-200 text-sm">
                                {{ current_user.email if current_user and current_user.is_authenticated else '' }}
                            </span>
                        </div>
                    </div>
                </div>
                
                {% if current_user and current_user.is_authenticated and not current_user.is_pro_user() %}
                <a href="/users/upgrade" class="bg-yellow-500 hover:bg-yellow-600 text-yellow-900 px-6 py-3 rounded-lg font-bold transition-colors">
                    Upgrade to Pro →
                </a>
                {% endif %}
            </div>
        </div>
    </section>

    <div class="max-w-7xl mx-auto px-6 py-12">
        <div class="grid lg:grid-cols-4 gap-8">
            <!-- Sidebar Navigation -->
            <aside class="lg:col-span-1">
                <div class="bg-white rounded-2xl shadow-lg p-6 sticky top-6">
                    <nav class="space-y-2">
                        <a href="#overview" class="flex items-center w-full px-4 py-3 text-white bg-blue-600 rounded-lg transition-colors hover:bg-blue-700" data-section="overview">
                            <svg class="w-5 h-5 mr-3" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z"/>
                            </svg>
                            Overview
                        </a>
                        <a href="#profile" class="flex items-center w-full px-4 py-3 text-gray-700 rounded-lg transition-colors hover:bg-gray-100" data-section="profile">
                            <svg class="w-5 h-5 mr-3" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z" clip-rule="evenodd"/>
                            </svg>
                            Profile Settings
                        </a>
                        <a href="#subscription" class="flex items-center w-full px-4 py-3 text-gray-700 rounded-lg transition-colors hover:bg-gray-100" data-section="subscription">
                            <svg class="w-5 h-5 mr-3" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M4 4a2 2 0 00-2 2v4a2 2 0 002 2V6h10a2 2 0 00-2-2H4zm2 6a2 2 0 012-2h8a2 2 0 012 2v4a2 2 0 01-2 2H8a2 2 0 01-2-2v-4zm6 4a2 2 0 100-4 2 2 0 000 4z" clip-rule="evenodd"/>
                            </svg>
                            Subscription
                        </a>

                        <a href="#usage" class="flex items-center w-full px-4 py-3 text-gray-700 rounded-lg transition-colors hover:bg-gray-100" data-section="usage">
                            <svg class="w-5 h-5 mr-3" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M3 3a1 1 0 000 2v8a2 2 0 002 2h2.586l-1.293 1.293a1 1 0 101.414 1.414L10 15.414l2.293 2.293a1 1 0 001.414-1.414L12.414 15H15a2 2 0 002-2V5a1 1 0 100-2H3zm11.707 4.707a1 1 0 00-1.414-1.414L10 9.586 8.707 8.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
                            </svg>
                            Usage Stats
                        </a>
                        <a href="#security" class="flex items-center w-full px-4 py-3 text-gray-700 rounded-lg transition-colors hover:bg-gray-100" data-section="security">
                            <svg class="w-5 h-5 mr-3" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M2.166 4.999A11.954 11.954 0 0010 1.944 11.954 11.954 0 0017.834 5c.11.65.166 1.32.166 2.001 0 5.225-3.34 9.67-8 11.317C5.34 16.67 2 12.225 2 7c0-.682.057-1.35.166-2.001zm11.541 3.708a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
                            </svg>
                            Security
                        </a>
                    </nav>
                    
                    <div class="mt-8 pt-6 border-t border-gray-200">
                        <a href="/auth/logout" class="flex items-center text-red-600 hover:text-red-700 font-medium">
                            <svg class="w-5 h-5 mr-3" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M3 3a1 1 0 00-1 1v12a1 1 0 102 0V4a1 1 0 00-1-1zm10.293 9.293a1 1 0 001.414 1.414l3-3a1 1 0 000-1.414l-3-3a1 1 0 10-1.414 1.414L14.586 9H7a1 1 0 100 2h7.586l-1.293 1.293z" clip-rule="evenodd"/>
                            </svg>
                            Sign Out
                        </a>
                    </div>
                </div>
            </aside>

            <!-- Main Content -->
            <main class="lg:col-span-3">
                <!-- Overview Section -->
                <div id="overview-section" class="account-section">
                    <div class="bg-white rounded-2xl shadow-lg p-8 mb-8">
                        <h2 class="text-2xl font-bold text-gray-900 mb-6">Account Overview</h2>
                        
                        <!-- Quick Stats -->
                        <div class="grid md:grid-cols-3 gap-6 mb-8">
                            <div class="bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl p-6">
                                <div class="flex items-center justify-between mb-4">
                                    <div class="w-12 h-12 bg-blue-600 rounded-lg flex items-center justify-center">
                                        <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 20 20">
                                            <path fill-rule="evenodd" d="M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z" clip-rule="evenodd"/>
                                        </svg>
                                    </div>
                                </div>
                                <h3 class="text-lg font-bold text-gray-900 mb-1">Tools Used</h3>
                                <p class="text-3xl font-bold text-blue-600 mb-1">{{ user_stats.tools_used }}</p>
                                {% if user_stats.is_pro %}
                                    <p class="text-sm text-gray-600">Unlimited usage</p>
                                {% else %}
                                    <p class="text-sm text-gray-600">/ {{ user_stats.usage_limit }} daily limit</p>
                                    <div class="w-full bg-gray-200 rounded-full h-2 mt-2">
                                        <div class="bg-blue-600 h-2 rounded-full" style="width: {{ (user_stats.tools_used / user_stats.usage_limit * 100)|round }}%"></div>
                                    </div>
                                {% endif %}
                            </div>

                            <div class="bg-gradient-to-br from-green-50 to-green-100 rounded-xl p-6">
                                <div class="flex items-center justify-between mb-4">
                                    <div class="w-12 h-12 bg-green-600 rounded-lg flex items-center justify-center">
                                        <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 20 20">
                                            <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"/>
                                            <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a2 2 0 002 2h8a2 2 0 002-2V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm8 8a1 1 0 100-2 1 1 0 000 2z" clip-rule="evenodd"/>
                                        </svg>
                                    </div>
                                </div>
                                <h3 class="text-lg font-bold text-gray-900 mb-1">Reports Generated</h3>
                                <p class="text-3xl font-bold text-green-600 mb-1">{{ user_stats.reports_generated }}</p>
                                <p class="text-sm text-gray-600">This month</p>
                            </div>

                            <div class="bg-gradient-to-br from-purple-50 to-purple-100 rounded-xl p-6">
                                <div class="flex items-center justify-between mb-4">
                                    <div class="w-12 h-12 bg-purple-600 rounded-lg flex items-center justify-center">
                                        {% if user_stats.is_pro %}
                                            <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 20 20">
                                                <path fill-rule="evenodd" d="M3 3a1 1 0 000 2v8a2 2 0 002 2h2.586l-1.293 1.293a1 1 0 101.414 1.414L10 15.414l2.293 2.293a1 1 0 001.414-1.414L12.414 15H15a2 2 0 002-2V5a1 1 0 100-2H3zm11.707 4.707a1 1 0 00-1.414-1.414L10 9.586 8.707 8.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
                                            </svg>
                                        {% else %}
                                            <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 20 20">
                                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-8.293l-3-3a1 1 0 00-1.414-1.414L9 5.586 7.707 4.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4a1 1 0 10-1.414-1.414L11 3.586l-.293.293z" clip-rule="evenodd"/>
                                            </svg>
                                        {% endif %}
                                    </div>
                                </div>
                                <h3 class="text-lg font-bold text-gray-900 mb-1">{{ user_stats.package_type }} Plan</h3>
                                {% if user_stats.is_pro %}
                                    <p class="text-3xl font-bold text-purple-600 mb-1">⭐ Active</p>
                                    <p class="text-sm text-gray-600">All features unlocked</p>
                                {% else %}
                                    <p class="text-3xl font-bold text-purple-600 mb-1">{{ user_stats.account_days }}</p>
                                    <p class="text-sm text-gray-600">Days as member</p>
                                {% endif %}
                            </div>
                        </div>

                <!-- Recent Activity -->
                        <div class="border-t pt-8">
                            <h3 class="text-lg font-bold text-gray-900 mb-4">Recent Activity</h3>
                            {% if user_stats.tools_used > 0 %}
                                <div class="space-y-4">
                                    <div class="flex items-center p-4 bg-gray-50 rounded-lg">
                                        <div class="w-10 h-10 bg-blue-600 rounded-full flex items-center justify-center mr-4">
                                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                                <path fill-rule="evenodd" d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z" clip-rule="evenodd"/>
                                            </svg>
                                        </div>
                                        <div class="flex-1">
                                            <p class="font-medium text-gray-900">SEO Tools Usage</p>
                                            <p class="text-sm text-gray-600">Used {{ user_stats.tools_used }} tools today{% if user_stats.is_pro %} (Unlimited plan){% else %} ({{ user_stats.usage_limit - user_stats.tools_used }} remaining){% endif %}</p>
                                        </div>
                                        <span class="text-sm text-gray-500">Today</span>
                                    </div>

                                    {% if user_stats.reports_generated > 0 %}
                                    <div class="flex items-center p-4 bg-gray-50 rounded-lg">
                                        <div class="w-10 h-10 bg-green-600 rounded-full flex items-center justify-center mr-4">
                                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"/>
                                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a2 2 0 002 2h8a2 2 0 002-2V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm8 8a1 1 0 100-2 1 1 0 000 2z" clip-rule="evenodd"/>
                                            </svg>
                                        </div>
                                        <div class="flex-1">
                                            <p class="font-medium text-gray-900">Reports Generated</p>
                                            <p class="text-sm text-gray-600">Generated {{ user_stats.reports_generated }} SEO reports this month</p>
                                        </div>
                                        <span class="text-sm text-gray-500">This month</span>
                                    </div>
                                    {% endif %}

                                    {% if user_stats.is_pro %}
                                    <div class="flex items-center p-4 bg-gradient-to-r from-yellow-50 to-yellow-100 rounded-lg border border-yellow-200">
                                        <div class="w-10 h-10 bg-yellow-600 rounded-full flex items-center justify-center mr-4">
                                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                                <path fill-rule="evenodd" d="M3 3a1 1 0 000 2v8a2 2 0 002 2h2.586l-1.293 1.293a1 1 0 101.414 1.414L10 15.414l2.293 2.293a1 1 0 001.414-1.414L12.414 15H15a2 2 0 002-2V5a1 1 0 100-2H3zm11.707 4.707a1 1 0 00-1.414-1.414L10 9.586 8.707 8.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
                                            </svg>
                                        </div>
                                        <div class="flex-1">
                                            <p class="font-medium text-yellow-900">Pro Member Benefits Active</p>
                                            <p class="text-sm text-yellow-800">Unlimited tools, advanced features, priority support</p>
                                        </div>
                                        <span class="text-sm text-yellow-700">Active</span>
                                    </div>
                                    {% else %}
                                    <div class="flex items-center p-4 bg-gradient-to-r from-blue-50 to-purple-50 rounded-lg border border-blue-200">
                                        <div class="w-10 h-10 bg-gradient-to-r from-blue-600 to-purple-600 rounded-full flex items-center justify-center mr-4">
                                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                                <path fill-rule="evenodd" d="M12.316 3.051a1 1 0 01.633 1.265l-4 12a1 1 0 11-1.898-.632l4-12a1 1 0 011.265-.633zM5.707 6.293a1 1 0 010 1.414L3.414 10l2.293 2.293a1 1 0 11-1.414 1.414l-3-3a1 1 0 010-1.414l3-3a1 1 0 011.414 0zm8.586 0a1 1 0 011.414 0l3 3a1 1 0 010 1.414l-3 3a1 1 0 11-1.414-1.414L16.586 10l-2.293-2.293a1 1 0 010-1.414z" clip-rule="evenodd"/>
                                            </svg>
                                        </div>
                                        <div class="flex-1">
                                            <p class="font-medium text-gray-900">Upgrade Available</p>
                                            <p class="text-sm text-gray-600">Unlock unlimited tools and advanced features with Pro</p>
                                        </div>
                                        <a href="/users/upgrade" class="text-sm bg-gradient-to-r from-blue-600 to-purple-600 text-white px-3 py-1 rounded-full font-medium hover:from-blue-700 hover:to-purple-700">Upgrade</a>
                                    </div>
                                    {% endif %}
                                </div>
                            {% else %}
                                <div class="text-center py-8">
                                    <div class="w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4">
                                        <svg class="w-8 h-8 text-gray-400" fill="currentColor" viewBox="0 0 20 20">
                                            <path fill-rule="evenodd" d="M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z" clip-rule="evenodd"/>
                                        </svg>
                                    </div>
                                    <h4 class="text-lg font-medium text-gray-900 mb-2">No Recent Activity</h4>
                                    <p class="text-gray-600 mb-4">Start using SEO tools to see your activity here</p>
                                    <a href="{{ url_for('tools.tools_index') }}" class="inline-flex items-center bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors">
                                        <svg class="w-4 h-4 mr-2" fill="currentColor" viewBox="0 0 20 20">
                                            <path fill-rule="evenodd" d="M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z" clip-rule="evenodd"/>
                                        </svg>
                                        Explore Tools
                                    </a>
                                </div>
                            {% endif %}
                        </div>
                    </div>
                </div>

                <!-- Profile Section -->
                <div id="profile-section" class="account-section hidden">
                    <div class="bg-white rounded-2xl shadow-lg p-8">
                        <h2 class="text-2xl font-bold text-gray-900 mb-6">Profile Settings</h2>
                        
                        <form action="/users/update-profile" method="POST" class="space-y-6">
                            <input type="hidden" name="csrf_token" value="{{ csrf_token }}">
                            
                            <div class="grid md:grid-cols-2 gap-6">
                                <div>
                                    <label for="username" class="block text-sm font-medium text-gray-700 mb-2">Username</label>
                                    <input type="text" id="username" name="username" value="{{ current_user.username if current_user else '' }}" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent" required>
                                </div>
                                
                                <div>
                                    <label for="email" class="block text-sm font-medium text-gray-700 mb-2">Email Address</label>
                                    <input type="email" id="email" name="email" value="{{ current_user.email if current_user else '' }}" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent" required>
                                </div>
                            </div>

                            <div class="grid md:grid-cols-2 gap-6">
                                <div>
                                    <label for="first_name" class="block text-sm font-medium text-gray-700 mb-2">First Name</label>
                                    <input type="text" id="first_name" name="first_name" value="{{ current_user.first_name if current_user else '' }}" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent">
                                </div>
                                
                                <div>
                                    <label for="last_name" class="block text-sm font-medium text-gray-700 mb-2">Last Name</label>
                                    <input type="text" id="last_name" name="last_name" value="{{ current_user.last_name if current_user else '' }}" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent">
                                </div>
                            </div>

                            <div>
                                <label for="bio" class="block text-sm font-medium text-gray-700 mb-2">Bio</label>
                                <textarea id="bio" name="bio" rows="4" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent" placeholder="Tell us about yourself...">{{ current_user.bio if current_user else '' }}</textarea>
                            </div>

                            <div class="flex justify-end">
                                <button type="submit" class="bg-blue-600 hover:bg-blue-700 text-white px-8 py-3 rounded-lg font-medium transition-colors">
                                    Update Profile
                                </button>
                            </div>
                        </form>
                    </div>
                </div>

                <!-- Subscription Section -->
                <div id="subscription-section" class="account-section hidden">
                    <div class="bg-white rounded-2xl shadow-lg p-8">
                        <h2 class="text-2xl font-bold text-gray-900 mb-6">Subscription Management</h2>
                        
                        {% if user_stats.is_pro %}
                            <!-- Pro User Content -->
                            <div class="mb-8">
                                <div class="flex items-center justify-between p-6 bg-gradient-to-r from-yellow-50 to-yellow-100 rounded-xl border border-yellow-200">
                                    <div class="flex items-center">
                                        <div class="w-12 h-12 bg-yellow-500 rounded-full flex items-center justify-center mr-4">
                                            <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 20 20">
                                                <path fill-rule="evenodd" d="M3 3a1 1 0 000 2v8a2 2 0 002 2h2.586l-1.293 1.293a1 1 0 101.414 1.414L10 15.414l2.293 2.293a1 1 0 001.414-1.414L12.414 15H15a2 2 0 002-2V5a1 1 0 100-2H3zm11.707 4.707a1 1 0 00-1.414-1.414L10 9.586 8.707 8.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
                                            </svg>
                                        </div>
                                        <div>
                                            <h3 class="text-lg font-bold text-yellow-900">⭐ Pro Plan Active</h3>
                                            <p class="text-yellow-800">You have access to all premium features</p>
                                        </div>
                                    </div>
                                    <div class="text-right">
                                        <div class="text-lg font-bold text-yellow-900">{{ user_stats.package_type }}</div>
                                        <div class="text-sm text-yellow-700">Subscription Active</div>
                                    </div>
                                </div>
                            </div>

                            <!-- Pro Benefits -->
                            <div class="grid md:grid-cols-2 gap-6 mb-8">
                                <div class="space-y-4">
                                    <h4 class="font-semibold text-gray-900">Your Pro Benefits</h4>
                                    <div class="space-y-3">
                                        <div class="flex items-center">
                                            <svg class="w-5 h-5 text-green-600 mr-3" fill="currentColor" viewBox="0 0 20 20">
                                                <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/>
                                            </svg>
                                            <span class="text-gray-700">Unlimited tool usage</span>
                                        </div>
                                        <div class="flex items-center">
                                            <svg class="w-5 h-5 text-green-600 mr-3" fill="currentColor" viewBox="0 0 20 20">
                                                <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/>
                                            </svg>
                                            <span class="text-gray-700">Advanced SEO analysis</span>
                                        </div>
                                        <div class="flex items-center">
                                            <svg class="w-5 h-5 text-green-600 mr-3" fill="currentColor" viewBox="0 0 20 20">
                                                <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/>
                                            </svg>
                                            <span class="text-gray-700">Priority customer support</span>
                                        </div>
                                        <div class="flex items-center">
                                            <svg class="w-5 h-5 text-green-600 mr-3" fill="currentColor" viewBox="0 0 20 20">
                                                <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/>
                                            </svg>
                                            <span class="text-gray-700">Export to PDF/Excel</span>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="space-y-4">
                                    <h4 class="font-semibold text-gray-900">Usage Statistics</h4>
                                    <div class="space-y-3">
                                        <div class="flex justify-between">
                                            <span class="text-gray-600">Tools used today:</span>
                                            <span class="font-medium">{{ user_stats.tools_used }}</span>
                                        </div>
                                        <div class="flex justify-between">
                                            <span class="text-gray-600">Reports generated:</span>
                                            <span class="font-medium">{{ user_stats.reports_generated }}</span>
                                        </div>
                                        <div class="flex justify-between">
                                            <span class="text-gray-600">Usage limit:</span>
                                            <span class="font-medium text-green-600">Unlimited ∞</span>
                                        </div>
                                        <div class="flex justify-between">
                                            <span class="text-gray-600">Account type:</span>
                                            <span class="font-medium text-yellow-600">⭐ Pro Member</span>
                                        </div>
                                    </div>
                                </div>
                            </div>

                        {% else %}
                            <!-- Free User Content -->
                            <div class="mb-8">
                                <div class="flex items-center justify-between p-6 bg-gradient-to-r from-blue-50 to-blue-100 rounded-xl border border-blue-200">
                                    <div class="flex items-center">
                                        <div class="w-12 h-12 bg-blue-500 rounded-full flex items-center justify-center mr-4">
                                            <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 20 20">
                                                <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"/>
                                            </svg>
                                        </div>
                                        <div>
                                            <h3 class="text-lg font-bold text-blue-900">Free Plan</h3>
                                            <p class="text-blue-800">You're using our free plan with limited features</p>
                                        </div>
                                    </div>
                                    <div class="text-right">
                                        <div class="text-lg font-bold text-blue-900">{{ user_stats.package_type }}</div>
                                        <div class="text-sm text-blue-700">{{ user_stats.tools_used }}/{{ user_stats.usage_limit }} tools used</div>
                                    </div>
                                </div>
                            </div>

                            <!-- Upgrade Promotion -->
                            <div class="bg-gradient-to-r from-blue-600 to-purple-600 rounded-xl p-8 mb-8 text-white">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <h3 class="text-2xl font-bold mb-2">🚀 Upgrade to Pro</h3>
                                        <p class="text-blue-100 mb-4">Unlock unlimited tools, advanced features, and priority support</p>
                                        <a href="/users/upgrade" class="bg-white text-blue-600 px-6 py-3 rounded-lg font-bold hover:bg-gray-100 transition-colors">
                                            Upgrade Now →
                                        </a>
                                    </div>
                                    <div class="hidden md:block">
                                        <svg class="w-24 h-24 text-blue-200" fill="currentColor" viewBox="0 0 20 20">
                                            <path fill-rule="evenodd" d="M3 3a1 1 0 000 2v8a2 2 0 002 2h2.586l-1.293 1.293a1 1 0 101.414 1.414L10 15.414l2.293 2.293a1 1 0 001.414-1.414L12.414 15H15a2 2 0 002-2V5a1 1 0 100-2H3zm11.707 4.707a1 1 0 00-1.414-1.414L10 9.586 8.707 8.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
                                        </svg>
                                    </div>
                                </div>
                            </div>

                            <!-- Current Usage -->
                            <div class="grid md:grid-cols-2 gap-6">
                                <div class="space-y-4">
                                    <h4 class="font-semibold text-gray-900">Current Usage</h4>
                                    <div class="space-y-3">
                                        <div class="flex justify-between">
                                            <span class="text-gray-600">Tools used today:</span>
                                            <span class="font-medium">{{ user_stats.tools_used }}/{{ user_stats.usage_limit }}</span>
                                        </div>
                                        <div class="w-full bg-gray-200 rounded-full h-2">
                                            <div class="bg-blue-600 h-2 rounded-full" style="width: {{ (user_stats.tools_used / user_stats.usage_limit * 100)|round }}%"></div>
                                        </div>
                                        <div class="flex justify-between">
                                            <span class="text-gray-600">Reports generated:</span>
                                            <span class="font-medium">{{ user_stats.reports_generated }}</span>
                                        </div>
                                        <div class="flex justify-between">
                                            <span class="text-gray-600">Remaining today:</span>
                                            <span class="font-medium">{{ user_stats.usage_limit - user_stats.tools_used }}</span>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="space-y-4">
                                    <h4 class="font-semibold text-gray-900">What You're Missing</h4>
                                    <div class="space-y-3">
                                        <div class="flex items-center">
                                            <svg class="w-5 h-5 text-red-500 mr-3" fill="currentColor" viewBox="0 0 20 20">
                                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"/>
                                            </svg>
                                            <span class="text-gray-700">Daily usage limits</span>
                                        </div>
                                        <div class="flex items-center">
                                            <svg class="w-5 h-5 text-red-500 mr-3" fill="currentColor" viewBox="0 0 20 20">
                                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"/>
                                            </svg>
                                            <span class="text-gray-700">Advanced analysis features</span>
                                        </div>
                                        <div class="flex items-center">
                                            <svg class="w-5 h-5 text-red-500 mr-3" fill="currentColor" viewBox="0 0 20 20">
                                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"/>
                                            </svg>
                                            <span class="text-gray-700">Export capabilities</span>
                                        </div>
                                        <div class="flex items-center">
                                            <svg class="w-5 h-5 text-red-500 mr-3" fill="currentColor" viewBox="0 0 20 20">
                                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"/>
                                            </svg>
                                            <span class="text-gray-700">Priority support</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        {% endif %}
                    </div>
                </div>


                <!-- Usage Stats Section -->
                <div id="usage-section" class="account-section hidden">
                    <div class="bg-white rounded-2xl shadow-lg p-8">
                        <h2 class="text-2xl font-bold text-gray-900 mb-6">Usage Statistics</h2>
                        
                        <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                            <div class="text-center p-4 bg-blue-50 rounded-lg">
                                <div class="text-3xl font-bold text-blue-600 mb-1">{{ user_stats.tools_used }}</div>
                                <div class="text-sm text-gray-600">Tools Used Today</div>
                            </div>
                            <div class="text-center p-4 bg-green-50 rounded-lg">
                                <div class="text-3xl font-bold text-green-600 mb-1">{{ user_stats.reports_generated }}</div>
                                <div class="text-sm text-gray-600">Reports Generated</div>
                            </div>
                            <div class="text-center p-4 bg-purple-50 rounded-lg">
                                <div class="text-3xl font-bold text-purple-600 mb-1">{{ user_stats.account_days }}</div>
                                <div class="text-sm text-gray-600">Days as Member</div>
                            </div>
                            <div class="text-center p-4 bg-yellow-50 rounded-lg">
                                <div class="text-3xl font-bold text-yellow-600 mb-1">
                                    {% if user_stats.is_pro %}∞{% else %}{{ user_stats.usage_limit }}{% endif %}
                                </div>
                                <div class="text-sm text-gray-600">Daily Limit</div>
                            </div>
                        </div>
                        
                        {% if not user_stats.is_pro %}
                        <div class="mb-6">
                            <div class="flex justify-between items-center mb-2">
                                <span class="text-sm font-medium text-gray-700">Daily Usage Progress</span>
                                <span class="text-sm text-gray-500">{{ user_stats.tools_used }}/{{ user_stats.usage_limit }}</span>
                            </div>
                            <div class="w-full bg-gray-200 rounded-full h-3">
                                <div class="bg-blue-600 h-3 rounded-full transition-all duration-300" style="width: {{ (user_stats.tools_used / user_stats.usage_limit * 100)|round }}%"></div>
                            </div>
                            {% set remaining = user_stats.usage_limit - user_stats.tools_used %}
                            <p class="text-sm text-gray-600 mt-2">
                                {% if remaining > 0 %}
                                    You have {{ remaining }} tool uses remaining today.
                                {% else %}
                                    You've reached your daily limit. Upgrade to Pro for unlimited access.
                                {% endif %}
                            </p>
                        </div>
                        {% endif %}
                        
                        <div class="border-t pt-6">
                            <h3 class="text-lg font-semibold text-gray-900 mb-4">Account Overview</h3>
                            <div class="space-y-3">
                                <div class="flex justify-between">
                                    <span class="text-gray-600">Account Type:</span>
                                    <span class="font-medium">
                                        {% if user_stats.is_pro %}
                                            <span class="text-yellow-600">⭐ Pro Member</span>
                                        {% else %}
                                            <span class="text-blue-600">Free Plan</span>
                                        {% endif %}
                                    </span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-600">Member Since:</span>
                                    <span class="font-medium">{{ user_stats.account_days }} days ago</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-600">Subscription Status:</span>
                                    <span class="font-medium">
                                        {% if user_stats.subscription_active %}
                                            <span class="text-green-600">Active</span>
                                        {% else %}
                                            <span class="text-gray-600">Inactive</span>
                                        {% endif %}
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Security Section -->
                <div id="security-section" class="account-section hidden">
                    <div class="bg-white rounded-2xl shadow-lg p-8">
                        <h2 class="text-2xl font-bold text-gray-900 mb-6">Security Settings</h2>
                        
                        <div class="space-y-8">
                            <!-- Password Change -->
                            <div>
                                <h3 class="text-lg font-semibold text-gray-900 mb-4">Change Password</h3>
                                <form class="space-y-4">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Current Password</label>
                                        <input type="password" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">New Password</label>
                                        <input type="password" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Confirm New Password</label>
                                        <input type="password" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent">
                                    </div>
                                    <button type="submit" class="bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors">
                                        Update Password
                                    </button>
                                </form>
                            </div>
                            
                            <!-- Security Status -->
                            <div class="border-t pt-6">
                                <h3 class="text-lg font-semibold text-gray-900 mb-4">Security Status</h3>
                                <div class="space-y-3">
                                    <div class="flex items-center justify-between p-3 bg-green-50 border border-green-200 rounded-lg">
                                        <div class="flex items-center">
                                            <svg class="w-5 h-5 text-green-600 mr-3" fill="currentColor" viewBox="0 0 20 20">
                                                <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/>
                                            </svg>
                                            <span class="font-medium text-green-800">Account Verified</span>
                                        </div>
                                        <span class="text-sm text-green-600">Email verified</span>
                                    </div>
                                    
                                    <div class="flex items-center justify-between p-3 bg-blue-50 border border-blue-200 rounded-lg">
                                        <div class="flex items-center">
                                            <svg class="w-5 h-5 text-blue-600 mr-3" fill="currentColor" viewBox="0 0 20 20">
                                                <path fill-rule="evenodd" d="M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z" clip-rule="evenodd"/>
                                            </svg>
                                            <span class="font-medium text-blue-800">Secure Connection</span>
                                        </div>
                                        <span class="text-sm text-blue-600">HTTPS enabled</span>
                                    </div>
                                    
                                    <div class="flex items-center justify-between p-3 bg-gray-50 border border-gray-200 rounded-lg">
                                        <div class="flex items-center">
                                            <svg class="w-5 h-5 text-gray-600 mr-3" fill="currentColor" viewBox="0 0 20 20">
                                                <path fill-rule="evenodd" d="M18 8A6 6 0 006.025.25 6.003 6.003 0 003.372 6.2c.34.374.78.653 1.28.8.5.147 1.02.13 1.52-.05L6 7c0 1.657 1.343 3 3 3s3-1.343 3-3v-.25c.5.18 1.02.197 1.52.05.5-.147.94-.426 1.28-.8A6.003 6.003 0 0018 8z" clip-rule="evenodd"/>
                                            </svg>
                                            <span class="font-medium text-gray-800">Data Protection</span>
                                        </div>
                                        <span class="text-sm text-gray-600">GDPR compliant</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Account navigation functionality
    const navLinks = document.querySelectorAll('nav a[data-section]');
    const sections = document.querySelectorAll('.account-section');
    
    navLinks.forEach(link => {
        link.addEventListener('click', function(e) {
            e.preventDefault();
            const sectionId = this.getAttribute('data-section');
            
            // Update active nav link styling
            navLinks.forEach(l => {
                l.classList.remove('text-white', 'bg-blue-600');
                l.classList.add('text-gray-700');
                l.classList.remove('hover:bg-blue-700');
                l.classList.add('hover:bg-gray-100');
            });
            
            // Set active state for clicked link
            this.classList.remove('text-gray-700', 'hover:bg-gray-100');
            this.classList.add('text-white', 'bg-blue-600', 'hover:bg-blue-700');
            
            // Show corresponding section
            sections.forEach(section => {
                if (section.id === sectionId + '-section') {
                    section.classList.remove('hidden');
                } else {
                    section.classList.add('hidden');
                }
            });
        });
    });
});
</script>


{% endblock %} 