{% extends 'base.html' %}

{% block title %}
  Account Settings - Super SEO Toolkit
{% endblock %}

{% block content %}
  <div class="min-h-screen bg-gray-50">
    <div class="max-w-4xl mx-auto px-6 py-8">
      <h1 class="text-3xl font-bold text-gray-900 mb-8">Account Settings</h1>

      <!-- Settings Tabs -->
      <div class="bg-white rounded-xl shadow-lg">
        <!-- Tab Navigation -->
        <div class="border-b border-gray-200">
          <nav class="flex space-x-8 px-6" aria-label="Tabs">
            <button class="settings-tab active" data-tab="general">
              <i data-lucide="user" class="w-4 h-4 mr-2"></i>
              General
            </button>
            <button class="settings-tab" data-tab="security">
              <i data-lucide="shield" class="w-4 h-4 mr-2"></i>
              Security
            </button>
            <button class="settings-tab" data-tab="notifications">
              <i data-lucide="bell" class="w-4 h-4 mr-2"></i>
              Notifications
            </button>
            <button class="settings-tab" data-tab="preferences">
              <i data-lucide="settings" class="w-4 h-4 mr-2"></i>
              Preferences
            </button>
          </nav>
        </div>

        <!-- Tab Content -->
        <div class="p-6">
          <!-- General Settings -->
          <div id="general-tab" class="tab-content">
            <h2 class="text-xl font-bold text-gray-900 mb-6">General Settings</h2>

            <form action="{{ url_for('users.account') }}" method="POST" class="space-y-6">
              <input type="hidden" name="csrf_token" value="{{ csrf_token() }}" />

              <div class="grid md:grid-cols-2 gap-6">
                <div>
                  <label for="first_name" class="block text-sm font-medium text-gray-700 mb-2">First Name</label>
                  <input type="text" id="first_name" name="first_name" value="{{ current_user.first_name or '' }}" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent" />
                </div>
                <div>
                  <label for="last_name" class="block text-sm font-medium text-gray-700 mb-2">Last Name</label>
                  <input type="text" id="last_name" name="last_name" value="{{ current_user.last_name or '' }}" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent" />
                </div>
              </div>

              <div>
                <label for="email" class="block text-sm font-medium text-gray-700 mb-2">Email Address</label>
                <input type="email" id="email" name="email" value="{{ current_user.email }}" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent" required />
              </div>

              <div>
                <label for="phone" class="block text-sm font-medium text-gray-700 mb-2">Phone Number</label>
                <input type="tel" id="phone" name="phone" value="{{ current_user.phone or '' }}" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent" />
              </div>

              <div class="flex justify-end">
                <button type="submit" class="bg-blue-600 hover:bg-blue-700 text-white px-8 py-3 rounded-lg font-medium transition-colors">Save Changes</button>
              </div>
            </form>
          </div>

          <!-- Security Settings -->
          <div id="security-tab" class="tab-content hidden">
            <h2 class="text-xl font-bold text-gray-900 mb-6">Security Settings</h2>

            <div class="space-y-6">
              <!-- Password Change -->
              <div class="border border-gray-200 rounded-lg p-6">
                <h3 class="text-lg font-semibold text-gray-900 mb-4">Change Password</h3>
                <form class="space-y-4">
                  <div>
                    <label for="current_password" class="block text-sm font-medium text-gray-700 mb-2">Current Password</label>
                    <input type="password" id="current_password" name="current_password" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent" />
                  </div>
                  <div>
                    <label for="new_password" class="block text-sm font-medium text-gray-700 mb-2">New Password</label>
                    <input type="password" id="new_password" name="new_password" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent" />
                  </div>
                  <div>
                    <label for="confirm_password" class="block text-sm font-medium text-gray-700 mb-2">Confirm New Password</label>
                    <input type="password" id="confirm_password" name="confirm_password" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent" />
                  </div>
                  <button type="submit" class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-medium transition-colors">Update Password</button>
                </form>
              </div>

              <!-- Account Status -->
              <div class="border border-gray-200 rounded-lg p-6">
                <h3 class="text-lg font-semibold text-gray-900 mb-4">Account Status</h3>
                <div class="space-y-3">
                  <div class="flex justify-between items-center">
                    <span class="text-gray-700">Account Type</span>
                    <span class="font-medium text-gray-900">{{ current_user.get_package_display_name() }}</span>
                  </div>
                  <div class="flex justify-between items-center">
                    <span class="text-gray-700">Subscription Status</span>
                    <span class="font-medium text-gray-900">
                      {% if current_user.subscription_active %}
                        <span class="text-green-600">Active</span>
                      {% else %}
                        <span class="text-gray-600">Inactive</span>
                      {% endif %}
                    </span>
                  </div>
                  <div class="flex justify-between items-center">
                    <span class="text-gray-700">Two-Factor Authentication</span>
                    <span class="text-gray-500">Coming Soon</span>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Notifications Settings -->
          <div id="notifications-tab" class="tab-content hidden">
            <h2 class="text-xl font-bold text-gray-900 mb-6">Notification Preferences</h2>

            <div class="space-y-6">
              <div class="border border-gray-200 rounded-lg p-6">
                <h3 class="text-lg font-semibold text-gray-900 mb-4">Email Notifications</h3>
                <div class="space-y-4">
                  <label class="flex items-center">
                    <input type="checkbox" class="rounded border-gray-300 text-blue-600 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50" checked />
                    <span class="ml-2 text-gray-700">SEO reports and analysis updates</span>
                  </label>
                  <label class="flex items-center">
                    <input type="checkbox" class="rounded border-gray-300 text-blue-600 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50" checked />
                    <span class="ml-2 text-gray-700">New tool releases and features</span>
                  </label>
                  <label class="flex items-center">
                    <input type="checkbox" class="rounded border-gray-300 text-blue-600 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50" />
                    <span class="ml-2 text-gray-700">Marketing and promotional emails</span>
                  </label>
                </div>
              </div>
            </div>
          </div>

          <!-- Preferences Settings -->
          <div id="preferences-tab" class="tab-content hidden">
            <h2 class="text-xl font-bold text-gray-900 mb-6">User Preferences</h2>

            <div class="space-y-6">
              <div class="border border-gray-200 rounded-lg p-6">
                <h3 class="text-lg font-semibold text-gray-900 mb-4">Interface Settings</h3>
                <div class="space-y-4">
                  <div>
                    <label for="timezone" class="block text-sm font-medium text-gray-700 mb-2">Timezone</label>
                    <select id="timezone" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent">
                      <option>UTC (Coordinated Universal Time)</option>
                      <option>EST (Eastern Standard Time)</option>
                      <option>PST (Pacific Standard Time)</option>
                      <option>GMT (Greenwich Mean Time)</option>
                    </select>
                  </div>
                  <div>
                    <label for="date_format" class="block text-sm font-medium text-gray-700 mb-2">Date Format</label>
                    <select id="date_format" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent">
                      <option>MM/DD/YYYY</option>
                      <option>DD/MM/YYYY</option>
                      <option>YYYY-MM-DD</option>
                    </select>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', function () {
      // Tab functionality
      const tabs = document.querySelectorAll('.settings-tab')
      const tabContents = document.querySelectorAll('.tab-content')
    
      tabs.forEach((tab) => {
        tab.addEventListener('click', function () {
          const targetTab = this.getAttribute('data-tab')
    
          // Remove active class from all tabs
          tabs.forEach((t) => t.classList.remove('active'))
          // Hide all tab contents
          tabContents.forEach((content) => content.classList.add('hidden'))
    
          // Add active class to clicked tab
          this.classList.add('active')
          // Show target content
          document.getElementById(targetTab + '-tab').classList.remove('hidden')
        })
      })
    
      if (typeof lucide !== 'undefined') {
        lucide.createIcons()
      }
    })
  </script>

  <style>
    .settings-tab {
      @apply flex items-center px-1 py-4 text-sm font-medium text-gray-500 hover:text-gray-700 border-b-2 border-transparent hover:border-gray-300 transition-colors;
    }
    
    .settings-tab.active {
      @apply text-blue-600 border-blue-600;
    }
  </style>
{% endblock %}
